version: 2

models:
  - name: stg_open_logs
    description: "Staging model for blockchain event logs with bytea to hex conversion"
    columns:
      - name: is_removed
        description: "Whether the log was removed due to chain reorganization"
      - name: log_index
        description: "Position of the log within the block"
        tests:
          - not_null
      - name: transaction_index
        description: "Position of the transaction within the block"
      - name: block_number
        description: "Block number"
        tests:
          - not_null
      - name: transaction_hash
        description: "Transaction hash (hex string with 0x prefix)"
        tests:
          - not_null
      - name: block_hash
        description: "Block hash (hex string with 0x prefix)"
      - name: contract_address
        description: "Contract address that emitted the event (hex string with 0x prefix)"
        tests:
          - not_null
      - name: topic0
        description: "Event signature hash (hex string with 0x prefix)"
      - name: topic1
        description: "First indexed parameter (hex string with 0x prefix)"
      - name: topic2
        description: "Second indexed parameter (hex string with 0x prefix)"
      - name: event_data
        description: "Non-indexed event parameters (hex string with 0x prefix)"

  - name: stg_event_signature
    description: "Staging model for event signature lookup table"
    columns:
      - name: topic0_hash
        description: "Event signature hash (keccak256, hex string with 0x prefix)"
        tests:
          - not_null
          - unique
      - name: event_name
        description: "Human-readable event name (e.g., Transfer, Approval)"
      - name: event_signature
        description: "Full event signature (e.g., Transfer(address,address,uint256))"
